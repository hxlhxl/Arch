
# 层次化

计算机科学领域的任何问题，都可以通过增加一个间接的中间层来解决。
最典型的代表就是TCP/IP协议栈。同样的，操作系统也是一个层次结构。

User space
    apps
        system libs
        ---------- system call ------------
        Kernel Space
            --------- hardware specification -----------
                hardware

虚线部分就相当于中间层，层次之间的通信规则可以称之为interface。

# 调度 进程

计算机上运行的程序大致可分为两类：CPU-bound、IO-bound。
不同的类型对CPU的占用度是不同的，因此不同程序间应该如何分配CPU(有限硬件资源)也是操作系统的工作之一，这种也就是任务调度。
任务调度经历了 多道程序、分时系统和多任务系统等阶段。
而多任务中系统中，描述和调度一个程序就是以进程为基本单位的。

# 并发 并行

使用上没有多大的区别，但是本质上是有区别的。
在单核机器上，同一时间只能运行一个任务，但是使用time sharing机制，使得多个任务在只能运行一个任务的机器上看起来像在同时运行。这种并发会存在任务切换(context switch)开销，每次切换要保持当前进程的寄存器状态和指令指针，还要查找切换到哪个任务。
在多核机器上，同一时间可以运行多个任务，实现真正的并发(并行)。并行系统中也会存在context switch，因为任务总是比cpu核心要多。 


# 并发途径
办公室 开发人员 沟通

## 多进程并发
多间办公室+每个办公室一个开发人员+沟通成本有点高
一个程序拥有多个进程，多个进程共同合作完成一个程序的使命，进程之间使用操作系统提供的机制进行通信(信号、套接字、文件、管道等)。

## 多线程并发
一间办公室+办公室多个开发人员+沟通成本低
一个程序只有一个进程，进程内部是轻量级的线程，他们共享地址空间，所以操作系统需要记录的事情变少了，开销减少了。但是这也正是多线程的代价，多个线程之间对数据的操作必须保持一致性。











# ref

[程序员的自我修养（二）：操作系统、进程与线程](https://liam0205.me/2017/01/17/layers-and-operation-system/)